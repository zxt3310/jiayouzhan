(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0bb9":function(n,e,o){"use strict";o.r(e);var t=o("1829"),i=o.n(t);for(var r in t)"default"!==r&&function(n){o.d(e,n,function(){return t[n]})}(r);e["default"]=i.a},1662:function(n,e,o){"use strict";var t=function(){var n=this,e=n.$createElement;n._self._c},i=[];o.d(e,"a",function(){return t}),o.d(e,"b",function(){return i})},1829:function(n,e,o){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(o("ba2c"));var t=o("2f62");function i(n){return n&&n.__esModule?n:{default:n}}function r(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),t.forEach(function(e){a(n,e,o[e])})}return n}function a(n,e,o){return e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}var s=function(){return o.e("components/m-input").then(o.bind(null,"0ecc"))},c={components:{mInput:s},data:function(){return{providerList:[],hasProvider:!1,account:"",password:"",positionTop:0}},computed:(0,t.mapState)(["forcedLogin"]),methods:r({},(0,t.mapMutations)(["login"]),{initProvider:function(){var e=this,o=["weixin","qq","sinaweibo"];n.getProvider({service:"oauth",success:function(n){if(n.provider&&n.provider.length){for(var t=0;t<n.provider.length;t++)~o.indexOf(n.provider[t])&&e.providerList.push({value:n.provider[t],image:"../../static/img/"+n.provider[t]+".png"});e.hasProvider=!0}},fail:function(n){console.error("获取服务供应商失败："+JSON.stringify(n)," at pages/login/login.vue:76")}})},initPosition:function(){this.positionTop=n.getSystemInfoSync().windowHeight-100},bindLogin:function(){if(this.account.length<5)n.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)n.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var e={account:this.account,password:this.password},o=this;this.$fly.request("api/check-credentials",{mobile:e.account,password:e.password,rank:2},{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("登录成功"," at pages/login/login.vue:137"),console.log(e," at pages/login/login.vue:138");var t=e.accessToken;console.log(typeof t," at pages/login/login.vue:141");var i={token:t,haslogin:!0,username:e.name,userphone:e.mobile};n.setStorage({key:"userInfo",data:i,success:function(n){console.log("save"," at pages/login/login.vue:154")}}),o.login(e.name,e.mobile),o.toMain("userTest")}).catch(function(e){console.log("fail"," at pages/login/login.vue:161"),console.log(e," at pages/login/login.vue:162"),n.showToast({icon:"none",title:e.message})})}},oauth:function(e){var o=this;n.login({provider:e,success:function(t){n.getUserInfo({provider:e,success:function(n){o.toMain(n.userInfo.nickName)}})},fail:function(n){console.error("授权登录失败："+JSON.stringify(n)," at pages/login/login.vue:185")}})},toMain:function(e){this.login(e),this.forcedLogin?n.reLaunch({url:"../main/main"}):n.navigateBack()}}),onReady:function(){this.initPosition()}};e.default=c}).call(this,o("6e42")["default"])},"1b43":function(n,e,o){"use strict";var t=o("e9e5"),i=o.n(t);i.a},"8aff":function(n,e,o){"use strict";o.r(e);var t=o("1662"),i=o("0bb9");for(var r in i)"default"!==r&&function(n){o.d(e,n,function(){return i[n]})}(r);o("1b43");var a=o("2877"),s=Object(a["a"])(i["default"],t["a"],t["b"],!1,null,null,null);e["default"]=s.exports},e9e5:function(n,e,o){}},[["3d16","common/runtime","common/vendor"]]]);